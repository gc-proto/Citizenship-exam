/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v4.0.28.1+MTfind - 2018-06-11
 */!function(v,w){"use strict";var e=w.doc,u="wb-actionmng",l="."+u,t="[data-"+u+"]",y=u+"Rn",x=u+l,f={},p={},j={},a=["patch","ajax","addClass","removeClass","tblfilter","run"].join("."+x+" ")+"."+x,g=function(e,t,a){t[e]||(t[e]=[]),t[e].push(a)},b=function(e,t,a){var r,n,i;for(r=a[t];n=r.shift();)(i=n.action)&&(e.trigger(i+"."+x,n),delete n.action)};e.on("do."+x,function(e){var t,a,r,n,i,o,s,l=e.element||e.target,c=l.id,d=e.actions||[];if((l===e.target||e.currentTarget===e.target)&&-1===l.className.indexOf(u)){for(v.isArray(d)||(d=[d]),(r=d.length)&&(t=v(l)).addClass(u),c&&f[c]&&b(t,c,f),a=0;a!==r;a+=1)(i=(n=d[a]).action)&&((o=n.target)?(n.trgbefore?g(o,f,n):g(o,p,n),(s=n.trggroup)&&g(s,j,n)):t.trigger(i+"."+x,n));c&&p[c]&&b(t,c,p),v(e.target).removeClass(u)}}),e.on("clean."+x,function(e){var t,a,r=e.element||e.target,n=e.trggroup;if((r===e.target||e.currentTarget===e.target)&&n&&j[n])for(t=j[n];a=t.shift();)delete a.action}),e.on(a,l,function(e,t){var a,r,n,i,o,s,l,c,d,u,f,p,g,b,h,m=e.type;if(x===e.namespace)switch(m){case"run":!function(e,t){var a,r,n,i,o=e.target,s=v(o),l=j[t.trggroup];if(l&&!s.hasClass(y)){for(s.addClass(y),r=l.length,a=0;a!==r;a+=1)(i=(n=l[a]).action)&&s.trigger(i+"."+x,n);s.removeClass(y)}}(e,t);break;case"tblfilter":!function(e,t){var a=e.target,r=v(t.source||a),n=t.column,i=parseInt(n,10),o=!!t.regex,s=!t.smart||!!t.smart,l=!t.caseinsen||!!t.caseinsen;if("TABLE"!==r.get(0).nodeName)throw"Table filtering can only applied on table";n=!0===i?i:n,r.dataTable({retrieve:!0}).api().column(n).search(t.value,o,s,l).draw()}(e,t);break;case"addClass":g=e,h=v((b=t).source||g.target),b.class&&h.addClass(b.class);break;case"removeClass":u=e,p=v((f=t).source||u.target),f.class&&p.removeClass(f.class);break;case"ajax":o=e,(s=t).container?l=v(s.container):(c=w.getId(),l=v("<div id='"+c+"'></div>"),v(o.target).after(l)),s.trigger&&l.attr("data-trigger-wet","true"),d=s.type?s.type:"replace",l.attr("data-ajax-"+d,s.url),l.one("wb-contentupdated",function(e,t){var a=e.currentTarget,r=a.getAttribute("data-trigger-wet");a.removeAttribute("data-ajax-"+t["ajax-type"]),r&&(v(a).find(w.allSelectors).addClass("wb-init").filter(":not(#"+a.id+" .wb-init .wb-init)").trigger("timerpoke.wb"),a.removeAttribute("data-trigger-wet"))}),l.trigger("wb-update.wb-data-ajax");break;case"patch":r=(a=t).source,n=a.patches,i=!!a.cumulative,n&&(v.isArray(n)||(n=[n]),v(r).trigger({type:"patches.wb-jsonmanager",patches:n,fpath:a.fpath,filter:a.filter||[],filternot:a.filternot||[],cumulative:i}))}}),e.on("timerpoke.wb wb-init.wb-actionmng",t,function(e){var t,a,r,n,i,o,s=w.init(e,u,l);if(s){if(t=v(s),a=w.getData(t,u))for(v.isArray(a)||(a=[a]),n=a.length,r=0;r!==n;r+=1)(o=(i=a[r]).trggroup)&&i.action&&g(o,j,i);w.ready(t,u)}}),w.add(t)}(jQuery,wb),function(k,c,C){"use strict";var e,f="wb-data-json",u="wb-json",t=["[data-json-after]","[data-json-append]","[data-json-before]","[data-json-prepend]","[data-json-replace]","[data-json-replacewith]","[data-"+u+"]"],p=["after","append","before","prepend","val"],g=/(href|src|data-*|pattern|min|max|step|low|high)/,b=/(checked|selected|disabled|required|readonly|multiple)/,a=t.length,h=t.join(","),m=f+"-queue",r=C.doc,v=function(e,t,a,r,n){var i,o=k(e),s={url:t,refId:a,nocache:r,nocachekey:n},l=c[f];!l||"http"!==t.substr(0,4)&&"//"!==t.substr(0,2)||(i=C.getUrlParts(t),C.pageUrlParts.protocol===i.protocol&&C.pageUrlParts.host===i.host||Modernizr.cors&&!l.forceCorsFallback||"function"==typeof l.corsFallback&&(s.dataType="jsonp",s.jsonp="callback",s=l.corsFallback(s))),o.trigger({type:"json-fetch.wb",fetch:s})},I=function(e,t,a){var r,n,i,o,s,l,c,d,u,f,p,g,b,h=t.mapping||[{}],m=t.filter||[],v=t.filternot||[],w=t.queryall,y=t.tobeclone,x=e.className,j=e,A=t.source?document.querySelector(t.source):e.querySelector("template");if(k.isArray(a)||(a="object"!=typeof a?[a]:k.map(a,function(e,t){return"object"!=typeof e||k.isArray(e)?e={"@id":t,"@value":e}:e["@id"]||(e["@id"]=t),[e]})),i=a.length,k.isArray(h)||(h=[h]),r=h.length,"TABLE"===e.tagName&&h&&-1!==x.indexOf("wb-tables-inited")&&"string"==typeof h[0]){for(b=k(e).dataTable({retrieve:!0}).api(),n=0;n<i;n+=1)if(o=a[n],T(o,m,v)){for(d="/"+n,g=[],s=0;s<r;s+=1)g.push(jsonpointer.get(a,d+h[s]));b.row.add(g)}b.draw()}else if(A)for(A.content||C.tmplPolyfill(A),t.appendto&&(j=k(t.appendto).get(0)),n=0;n<i;n+=1)if(o=a[n],T(o,m,v)){for(d="/"+n,u=y?A.content.querySelector(y).cloneNode(!0):A.content.cloneNode(!0),w&&(f=u.querySelectorAll(w)),s=0;s<r||0===s;s+=1)l=h[s],p=f?f[s]:l.selector?u.querySelector(l.selector):u,(c=l.attr)&&(p.hasAttribute(c)||p.setAttribute(c,""),p=p.getAttributeNode(c)),g="string"==typeof o?o:"string"==typeof l?jsonpointer.get(a,d+l):jsonpointer.get(a,d+l.value),l.placeholder&&(g=(p.textContent||"").replace(l.placeholder,g)),k.isArray(g)?I(p,l,g):l.isHTML?p.innerHTML=g:p.textContent=g;j.appendChild(u)}},T=function(e,t,a){var r,n,i,o=t.length,s=a.length,l=!1;if(o||s){for(r=0;r<o;r+=1)if(n=t[r],i=d(jsonpointer.get(e,n.path),n.value),n.optional)l=l||i;else{if(!i)return!1;l=!0}if(o&&!l)return!1;for(r=0;r<s;r+=1)if(n=a[r],(i=d(jsonpointer.get(e,n.path),n.value))&&!n.optional||i&&n.optional)return!1}return!0},d=function(e,t){switch(typeof e){case"undefined":return!1;case"boolean":case"string":case"number":return e===t;case"object":if(null===e)return null===t;if(k.isArray(e)){if(k.isArray(t)||e.length!==t.length)return!1;for(var a=0,r=e.length;a<r;a++)if(!d(e[a],t[a]))return!1;return!0}var n=i(t).length;if(i(e).length!==n)return!1;for(a=0;a<n;a++)if(!d(e[a],t[a]))return!1;return!0;default:return!1}},i=function(e){if(k.isArray(e)){for(var t=new Array(e.length),a=0;a<t.length;a++)t[a]=""+a;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};r.on("json-failed.wb",h,function(){throw"Bad JSON Fetched from url in "+f}),Modernizr.load({test:"content"in document.createElement("template"),nope:"site!deps/template"+C.getMode()+".js"}),r.on("timerpoke.wb wb-init.wb-data-json wb-update.wb-data-json json-fetched.wb",h,function(e){if(e.currentTarget===e.target)switch(e.type){case"timerpoke":case"wb-init":!function(e){var t,a=C.init(e,f,h);if(a){var r,n,i,o,s,l=["before","replace","replacewith","after","append","prepend"],c=l.length,d=[];for(t=k(a),i=0;i!==c;i+=1)r=l[i],null!==(s=a.getAttribute("data-json-"+r))&&d.push({type:r,url:s});if(C.ready(t,f),(n=C.getData(t,u))&&n.url)d.push(n);else if(n&&k.isArray(n))for(c=n.length,i=0;i!==c;i+=1)d.push(n[i]);for(t.data(m,d),c=d.length,i=0;i!==c;i+=1)o=d[i],v(a,o.url,i,o.nocache,o.nocachekey)}}(e);break;case"wb-update":!function(e){var t=e.target,a=k(t),r=a.data(m),n=r.length,i=e["wb-json"];if(!i.url||!i.type&&!i.source)throw"Data JSON update not configured properly";r.push(i),a.data(m,r),v(t,i.url,n)}(e);break;default:!function(e){var t,a=e.target,r=k(a),n=r.data(m),i=e.fetch,o=n[i.refId],s=o.type,l=o.prop||o.attr,c=o.showempty,d=i.response,u=typeof d;if(c||"undefined"!==u){if(c&&"undefined"===u&&(d=""),t=jQuery.ajaxSettings.cache,jQuery.ajaxSettings.cache=!0,s)if("replace"===s)r.html(d);else if("replacewith"===s)r.replaceWith(d);else if("addclass"===s)r.addClass(d);else if("removeclass"===s)r.removeClass(d);else if("prop"===s&&l&&b.test(l))r.prop(l,d);else if("attr"===s&&l&&g.test(l))r.attr(l,d);else{if("function"!=typeof r[s]||-1===p.indexOf(s))throw f+" do not support type: "+s;r[s](d)}else s="template",I(a,o,d),o.trigger&&r.find(C.allSelectors).addClass("wb-init").filter(":not(#"+a.id+" .wb-init .wb-init)").trigger("timerpoke.wb");jQuery.ajaxSettings.cache=t,r.trigger("wb-contentupdated",{"json-type":s,content:d})}}(e)}return!0});for(e=0;e!==a;e+=1)C.add(t[e])}(jQuery,window,wb),function(a,n,r){"use strict";var i="wb-template",o="template",e=r.doc,s=function(e){if(!e.content){var t,a,r=e;for(t=r.childNodes,a=n.createDocumentFragment();t[0];)a.appendChild(t[0]);r.content=a}};r.tmplPolyfill=s,e.on("timerpoke.wb wb-init.wb-template",o,function(e){var t=r.init(e,i,o);t&&(s(t),r.ready(a(t),i))}),r.add(o)}(jQuery,document,wb),function(r,e,n){"use strict";var i="wb-doaction",o="a[data-"+i+"],button[data-"+i+"]",s="do.wb-actionmng",l=n.doc;l.on("click",o,function(e){var t=e.target,a=r(t);if(e.currentTarget!==e.target&&(t=(a=a.parentsUntil("main",o))[0]),"BUTTON"===t.nodeName||"A"===t.nodeName)return n.isReady?a.trigger({type:s,actions:n.getData(a,i)}):l.one("wb-ready.wb",function(){a.trigger({type:s,actions:n.getData(a,i)})}),!1})}(jQuery,window,wb),function(O,S,E){"use strict";var q="wb-fieldflow",u="."+q,f=q+"-form",v=q+"-sub",D=q+"-init",e="."+D,M=q+E.getId(),L="[name^="+M+"]",w=q+"-label",b=q+"-header",t="."+f,a="wb-init"+u,R="draw"+u,z="action"+u,U="submit"+u,P="submited"+u,p="ready"+u,B="clean"+u,F="reset"+u,J="createctrl"+u,Q=q+"-register",$=q+"-hdnfld",_=q+"-config",K=q+"-push",V=q+"-submit",W=q+"-action",H=q+"-origin",Y="data-"+q+"-source",i=q+"-flagoptvalue",r=E.doc,g={toggle:{stateOn:"visible",stateOff:"hidden"},i18n:{en:{btn:"Continue",defaultsel:"Make your selection...",required:"required"},fr:{btn:"Allez",defaultsel:"Sélectionnez dans la liste...",required:"obligatoire"}},action:"ajax",prop:"url"},n=[["redir","query","ajax","addClass","removeClass","removeClass","append","tblfilter","toggle"].join("."+z+" ")+"."+z,["ajax","toggle","redir","addClass","removeClass"].join("."+U+" ")+"."+U,["tblfilter",q].join("."+R+" ")+"."+R,["select","checkbox","radio"].join("."+J+" ")+"."+J].join(" "),G=function(e,t,a,r){var n=e.data(t);return n&&!r||(n=[]),n.push(a),e.data(t,n)},h=function(e,t){var a=t.$selElm,r=t.name,n=t.value;r&&t.provEvt.setAttribute("name",r),n&&a.val(n),a.attr("data-"+i,i)},m=function(e,t){var a=O(t.origin),r=O(e.target).data(_),n=t.toggle;n&&"string"==typeof n&&(n={selector:n}),n=O.extend({},n,r.toggle),a.addClass("wb-toggle"),a.trigger("toggle.wb-toggle",n),n.type="off",a.one(B,function(){a.addClass("wb-toggle"),a.trigger("toggle.wb-toggle",n),a.removeClass("wb-toggle")})},y=function(e,t){var a,r,n,i,o,s,l,c,d=t.outputctnrid,u=t.actions,f=t.lblselector,p=!!t.required,g=!t.noreqlabel,b=t.items,h=e.target,m=O(h),v=t.source,w=m.data(_).i18n,y=t.attributes,x=E.getId(),j="<legend class='h5 ",A="</span>",k="<fieldset id='"+x+"' data-"+H+"='"+h.id+"' "+Y+"='"+v.id+"' class='"+D+" mrgn-bttm-md'",C="",I=t.typeRadCheck,T=t.inline,N=M+x;if(y&&"object"==typeof y)for(i in y)y.hasOwnProperty(i)&&(k+=" "+i+"='"+y[i]+"'");for(a=O(k+"></fieldset>"),p&&g&&(j+=" required",A+=" <strong class='required'>("+w.required+")</strong>"),j+="'>",A+="</legend>",f?(r=O("<div>"+t.label+"</div>").find(f),a.append(j+r.html()+A).append(r.nextAll()),n=r.prevAll()):a.append(O(j+t.label+A)),i=0,o=b.length;i!==o;i+=1)if((c=b[i]).group)for(C+="<p>"+c.label+"</p>",l=c.group.length,s=0;s!==l;s+=1)C+=X(c.group[s],N,I,T,p);else C+=X(c,N,I,T,p);a.append(C),O("#"+d).append(a),n&&a.before(n),u&&0<u.length&&a.data(K,u),G(m,Q,x)},x=function(e,t){var a,r,n,i,o,s,l,c,d,u,f,p,g,b=e.get(),h=b.length,m=[];for(a=0;a!==h;a+=1){if(o=null,n=i="",d=(r=b[a]).firstChild,l=(c=r.childNodes).length,!d)throw"You have a markup error, There may be an empyt <li> elements in your list.";for(g=[],"A"===d.nodeName&&(i=d.getAttribute("href"),n=O(d).html(),l=1,g.push({action:"redir",url:i})),s=1;s!==l;s+=1){if(u=c[s],(f=O(u)).hasClass(v)){p=u.id||E.getId(),u.id=p,i=q+"-"+p,g.push({action:"append",srctype:q,source:"#"+p});break}if("UL"===u.nodeName){if(t)throw"Recursive error, please check your code";o=x(f.children(),!0)}f.hasClass(w)&&(n=f.html())}n||(n=d.nodeValue),r.id||(r.id=E.getId()),m.push({bind:r.id,label:n,actions:g,group:o})}return m},T=function(e){var t=e.label,a="<option value='"+t+"'";return a+=l(e),a+=">"+t+"</option>"},l=function(e){var t="",a={};return a.bind=e.bind||"",a.actions=e.actions||[],t+=" data-"+q+"='"+JSON.stringify(a)+"'"},X=function(e,t,a,r,n){var i=e.label,o=E.getId(),s=" for='"+o+"'><input id='"+o+"' type='"+a+"' name='"+t+"' value='"+i+"'";return s=r?"<label class='"+a+(r?"-inline":"")+"'"+s:"<div class='"+a+"'><label"+s,s+=l(e),n&&(s+=" required='required'"),s+=" /> "+i+"</label>",r||(s+="</div>"),s};r.on(F,u+", ."+v,function(e){var t,a,r,n,i,o,s,l=e.target,c=[];if(l===e.currentTarget&&(a=(t=O(l)).data(_))&&a.reset)for(r=a.reset,O.isArray(r)?c=r:c.push(r),i=c.length,n=0;n!==i;n+=1)(s=(o=c[n]).action)&&(!1!==o.live&&(o.live=!0),t.trigger(s+"."+z,o))}),r.on("change",t+" "+e,function(e){var t,a,r,n,i,o,s,l,c=e.currentTarget,d=O(c),u=d.nextAll(),f=O("#"+c.getAttribute("data-"+H)),p=O("#"+c.getAttribute(Y)),g=f.data(Q),b=d.find(":checked",d),h=d.get(0).form;if(n=u.length){for(r=n;0!==r;r-=1)(s=u[r])&&(-1<(l=g.indexOf(s.id))&&g.splice(l,1),O("#"+s.getAttribute(Y)).trigger(F).trigger(B),O(s).trigger(B));f.data(Q,g),u.remove()}p.trigger(F).trigger(B),d.trigger(B),d.data(V,[]);var m,v,w,y,x,j,A,k,C,I=[],T=[],N=[];for(m=f.data(_),(v=p.data(_))&&m&&(m=O.extend({},m,v)),b.length&&b.val()&&m&&m.default&&(a=m.default,O.isArray(a)?I=a:I.push(a)),x=m.action,j=m.prop,W=m.actionData||{},(a=d.data(K))&&(I=I.concat(a)),r=0,n=b.length;r!==n;r+=1)if(t=b.get(r),(w=E.getData(t,q))&&(C=w.bind,I=I.concat(w.actions),C&&(y=S.getElementById(C).getAttribute("data-"+q)))){if(y.startsWith("{")||y.startsWith("[")){try{a=JSON.parse(y)}catch(e){O.error("Bad JSON object "+y)}O.isArray(a)||(a=[a])}else(a={}).action=x,a[j]=y,a=[a=O.extend(!0,{},W,a)];I=I.concat(a)}if(!I.length)return!0;for(r=0,n=I.length;r!==n;r+=1)(o=(i=I[r]).target)&&o!==C?N.push(i):T.push(i);for(A=m.base||{},k=N.length,r=0,n=T.length;r!==n;r+=1)(i=O.extend({},A,T[r])).origin=p.get(0),i.provEvt=c,i.$selElm=b,i.form=h,k&&(i.actions=N),f.trigger(i.action+"."+z,i);return!0}),r.on("submit",t+" form",function(e){var t,a,r,n,i,o,s,l,c,d,u,f,p,g,b,h=e.currentTarget,m=O(h),v=m.data(Q),w=m.data($)||[],y=v?v.length:0,x=[],j=[],A=!1;for(y&&(n=(r=O("#"+v[y-1])).data(Q),O("#"+n[n.length-1]).trigger(B),r.trigger(B)),a=0;a!==y;a+=1)for(d=(i=(r=O("#"+v[a])).data(Q)).length,c=0;c!==d;c+=1){if(o=O("#"+i[c]),s=O("#"+o.data(H)),j.push(s),l=s.data(_),!(g=o.data(V))&&l.defaultIfNone){for(u=0,f=(g=l.defaultIfNone).length;u!==f;u+=1)(p=g[u]).origin=s.get(0),p.$selElm=s.prev().find("input, select").eq(0),p.provEvt=p.$selElm.get(0),p.form=h,s.trigger(p.action+"."+z,p);g=o.data(V)}if(g)for(u=0,f=g.length;u!==f;u+=1)(p=g[u]).form=h,r.trigger(p.action+"."+U,p),x.push({$elm:r,data:p}),A=A||p.preventSubmit,b=p.provEvt}if(!A){for(m.find(L).removeAttr("name"),y=w.length,a=0;a!==y;a+=1)O(w[a]).remove();var k,C,I,T,N,S;if(w=[],(k=m.attr("action"))&&0<(C=k.indexOf("?"))){for(y=(S=k.substring(C+1).split("&")).length,a=0;a!==y;a+=1)0<(T=I=S[a]).indexOf("=")&&(T=(N=I.split("=",2))[0],I=N[1]),t=O("<input type='hidden' name='"+T+"' value='"+I+"' />"),m.append(t),w.push(t.get(0));m.data($,w)}}for(y=j.length,a=0;a!==y;a+=1)(l=(s=j[a]).data(_)).action&&x.push({$elm:s,data:l});for(y=x.length,a=0;a!==y;a+=1)(p=x[a]).data.lastProvEvt=b,p.$elm.trigger(p.data.action+"."+P,p.data);if(A)return e.preventDefault(),e.stopPropagation?e.stopImmediatePropagation():e.cancelBubble=!0,!1}),r.on("keyup",t+" select",function(e){if(-1!==navigator.userAgent.indexOf("Gecko"))return e.keyCode&&(1===e.keyCode||9===e.keyCode||16===e.keyCode||e.altKey||e.ctrlKey)||O(e.target).trigger("change"),!0}),r.on(n,u,function(e,t){var a,r,n,i,o,s,l,c,d,u,f,p,g=e.type;switch(e.namespace){case R:switch(g){case q:!function(e,t){if(e.namespace===R){var a,r,n,i,o,s,l,c=e.target,d=O(c),u=O(t.source),f=u.get(0),p=t.lblselector||"."+w,g=t.itmselector||"ul:first() > li";u.hasClass(v)&&(a=E.getData(u,q),u.data(_,a),t=O.extend({},t,a)),s=t.actions||[],l=t.renderas?t.renderas:"select",f.id||(f.id=E.getId()),(n=u.children().first()).hasClass(b)?(i=n.html(),g="."+b+" + "+g):(i=(r=n.find(p)).length?r.html():u.find("> p").html(),p=null),o=x(u.find(g)),t.outputctnrid||(t.outputctnrid=t.provEvt.parentElement.id),d.trigger(l+"."+J,{actions:s,source:f,attributes:t.attributes,outputctnrid:t.outputctnrid,label:i,lblselector:p,defaultselectedlabel:t.defaultselectedlabel,required:!t.isoptional,noreqlabel:t.noreqlabel,items:o,inline:t.inline})}}(e,t);break;case"tblfilter":!function(e,t){if(e.namespace===R){var a,r,n,i,o,s,l,c,d,u,f,p,g,b=t.column,h=t.csvextract,m=t.source,v=O(m),w=[],y=t.label,x=t.defaultselectedlabel,j=t.lblselector,A=t.fltrseq?t.fltrseq:[],k=t.limit?t.limit:10;if(!v.hasClass("wb-tables-inited"))return v.one("wb-ready.wb-tables",function(){O(e.target).trigger("tblfilter."+R,t)});if((r=v.dataTable({retrieve:!0}).api()).rows({search:"applied"}).data().length<=k)return;if(g=t.renderas?t.renderas:"select",!b&&A.length){if(!(d=A.shift()).column)throw"Column is undefined in the filter sequence";b=d.column,h=d.csvextract,x=d.defaultselectedlabel,y=d.label,j=d.lblselector}if(a=r.column(b,{search:"applied"}),h)for(o=0,s=(n=a.data()).length;o!==s;o+=1)w=w.concat(n[o].split(","));else for(o=0,s=(n=a.nodes()).length;o!==s;o+=1)for(l=0,c=(i=O(n[o]).find("li")).length;l!==c;l+=1)w.push(O(i[l]).text());w=w.sort().filter(function(e,t,a){return!t||e!==a[t-1]});var C=e.target,I=O(C),T=[],N=t.actions?t.actions:[];for(A.length&&(p={action:"append",srctype:"tblfilter",source:m,renderas:(u=A[0]).renderas?u.renderas:g,fltrseq:A,limit:k}),o=0,s=w.length;o!==s;o+=1)f={label:d=w[o],actions:[{action:"tblfilter",source:m,column:b,value:d}]},p&&f.actions.push(p),T.push(f);y||(y=a.header().textContent),t.outputctnrid||(t.outputctnrid=t.provEvt.parentElement.id),I.trigger(g+"."+J,{actions:N,source:v.get(0),outputctnrid:t.outputctnrid,label:y,defaultselectedlabel:x,lblselector:j,items:T,inline:t.inline})}}(e,t)}break;case J:switch(g){case"select":!function(e,t){var a,r,n,i,o,s,l,c,d,u=t.outputctnrid,f=O("#"+u),p=t.actions,g=t.lblselector,b=!!t.required,h=!t.noreqlabel,m=t.items,v=e.target,w=O(v),y=t.source,x=t.attributes,j=w.data(_).i18n,A=E.getId(),k="<label for='"+A+"'",C="</span>",I=t.defaultselectedlabel?t.defaultselectedlabel:j.defaultsel;if(b&&h&&(k+=" class='required'",C+=" <strong class='required'>("+j.required+")</strong>"),k+="><span class='field-name'>",C+="</label>",g?(r=(a=O("<div>"+t.label+"</div>")).find(g)).html(k+r.html()+C):a=O(k+t.label+C),n="<select id='"+A+"' name='"+M+A+"' class='full-width form-control mrgn-bttm-md "+D+"' data-"+H+"='"+v.id+"' "+Y+"='"+y.id+"'",b&&(n+=" required"),x&&"object"==typeof x)for(o in x)x.hasOwnProperty(o)&&(n+=" "+o+"='"+x[o]+"'");for(n+="><option value=''>"+I+"</option>",o=0,s=m.length;o!==s;o+=1)if((d=m[o]).group){for(n+="<optgroup label='"+d.label+"'>",c=d.group.length,l=0;l!==c;l+=1)n+=T(d.group[l]);n+="</optgroup>"}else n+=T(d);i=O(n+="</select>"),f.append(a).append(i),p&&0<p.length&&i.data(K,p),G(w,Q,A)}(e,t);break;case"checkbox":t.typeRadCheck="checkbox",y(e,t);break;case"radio":t.typeRadCheck="radio",y(e,t)}break;case z:switch(g){case"append":!function(e,t){if(e.namespace===z){var a=t.srctype?t.srctype:q;if(t.container=t.provEvt.parentNode.id,!t.source)throw"A source is required to append a field flow control.";O(e.currentTarget).trigger(a+"."+R,t)}}(e,t);break;case"redir":G(O(t.provEvt),V,t,!0);break;case"ajax":d=e,p=(u=t).provEvt,u.live?(u.container||(f=O("<div></div>"),O(p.parentNode).append(f),u.container=f.get(0)),O(d.target).trigger("ajax."+U,u)):(u.preventSubmit=!0,G(O(p),V,u));break;case"tblfilter":!function(e,t){if(e.namespace===z){var a,r=t.source,n=O(r).dataTable({retrieve:!0}).api(),i=t.column,o=parseInt(i,10),s=!!t.regex,l=!t.smart||!!t.smart,c=!t.caseinsen||!!t.caseinsen;i=!0===o?o:i,(a=n.column(i)).search(t.value,s,l,c).draw(),O(t.provEvt).one(B,function(){a.search("").draw()})}}(e,t);break;case"toggle":t.live?m(e,t):(t.preventSubmit=!0,G(O(t.provEvt),V,t));break;case"addClass":if(!t.source||!t.class)return;t.live?O(t.source).addClass(t.class):(t.preventSubmit=!0,G(O(t.provEvt),V,t));break;case"removeClass":if(!t.source||!t.class)return;t.live?O(t.source).removeClass(t.class):(t.preventSubmit=!0,G(O(t.provEvt),V,t));break;case"query":h(0,t)}break;case U:switch(g){case"redir":l=(s=t).form,(c=s.url)&&l.setAttribute("action",c);break;case"ajax":o=(a=t).clean,a.container?r=O(a.container):(n=E.getId(),r=O("<div id='"+n+"'></div>"),O(a.form).append(r),o="#"+n),o&&O(a.origin).one(B,function(){O(o).empty()}),a.trigger&&r.attr("data-trigger-wet","true"),i=a.type?a.type:"replace",r.attr("data-ajax-"+i,a.url),r.one("wb-contentupdated",function(e,t){var a=e.currentTarget,r=a.getAttribute("data-trigger-wet");a.removeAttribute("data-ajax-"+t["ajax-type"]),r&&(O(a).find(E.allSelectors).addClass("wb-init").filter(":not(#"+a.id+" .wb-init .wb-init)").trigger("timerpoke.wb"),a.removeAttribute("data-trigger-wet"))}),r.trigger("wb-update.wb-data-ajax");break;case"toggle":m(e,t);break;case"addClass":O(t.source).addClass(t.class);break;case"removeClass":O(t.source).removeClass(t.class);break;case"query":h(0,t)}}}),r.on("timerpoke.wb "+a,u,function(e){switch(e.type){case"timerpoke":case"wb-init":!function(e){var t,a,r,n,i,o=E.init(e,q,u);if(o){t=O(o),a=o.id,g.i18n[E.lang]&&(g.i18n=g.i18n[E.lang]),(r=E.getData(t,q))&&r.i18n&&(r.i18n=O.extend({},g.i18n,r.i18n)),(n=O.extend({},g,r)).defaultIfNone&&!O.isArray(n.defaultIfNone)&&(n.defaultIfNone=[n.defaultIfNone]),t.data(_,n),i=n.i18n,String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e});var s,l,c,d=E.getId();if(n.noForm){for(s="<div class='mrgn-tp-md'><div id='"+d+"'></div></div>",l=o.parentElement;"FORM"!==l.nodeName;)l=l.parentElement;O(l.parentElement).addClass(f)}else s=(s="<div class='wb-frmvld "+f+"'><form><div id='"+d+"'>")+'</div><input type="submit" value="'+i.btn+'" class="btn btn-primary mrgn-bttm-md" /> </form></div>';t.addClass("hidden"),s=O(s),t.after(s),n.noForm||(l=s.find("form"),s.trigger("wb-init.wb-frmvld")),c=O(l),G(c,Q,a),n.outputctnrid||(n.outputctnrid=d),n.source||(n.source=o),n.srctype||(n.srctype=q),n.inline=!!n.inline,t.trigger(n.srctype+"."+R,n),n.unhideelm&&O(n.unhideelm).removeClass("hidden"),n.hideelm&&O(n.hideelm).addClass("hidden"),E.ready(t,q),n.ext&&(n.form=c.get(0),t.trigger(n.ext+"."+p,n))}}(e)}return!0}),E.add(u)}(jQuery,document,wb),function(p,g){"use strict";var e=g.doc,b={},h={},m=function(e,t,a,r,n,i){if(!window.jsonpointer)return setTimeout(function(){m(e,t,a,r,n,i)},100),!1;i&&(a=jsonpointer.get(a,i)),p("#"+e).trigger({type:"json-fetched.wb",fetch:{response:a,status:r,xhr:n,refId:t}},this)};e.on("json-fetch.wb",function(e){var t,a,s,r,n=e.element||e.target,l=e.fetch,i=l.url.split("#"),c=i[0],o=l.nocache,d=l.nocachekey||g.cacheBustKey||"wbCacheBust",u=i[1]||!1,f=l.refId;if(n===e.target||e.currentTarget===e.target){if(n.id||(n.id=g.getId()),s=n.id,u){if(91===(a=u.split("/")[0]).charCodeAt(0))return void p("#"+s).trigger({type:"postpone.wb-jsonmanager",postpone:{callerId:s,refId:f,dsname:a,selector:u.substring(a.length)}});l.url=c}o&&(t=d+"="+("nocache"===o?g.guid():g.sessionGUID()),c=-1!==c.indexOf("?")?c+"&"+t:c+"?"+t,l.url=c),Modernizr.load({load:"site!deps/jsonpointer"+g.getMode()+".js",complete:function(){if(!l.nocache){if(r=b[c])return void m(s,f,r,"success",void 0,u);if(h[c])return void h[c].push({callerId:s,refId:f,selector:u});h[c]=[]}p.ajax(l).done(function(e,t,a){var r,n,i,o;if(!l.nocache)try{b[c]=e}catch(e){return}if(m(s,f,e,t,a,u),h[c])for(n=(o=h[c]).length,r=0;r!==n;r+=1)i=o[r],m(i.callerId,i.refId,e,t,a,i.selector)}).fail(function(e,t,a){p("#"+s).trigger({type:"json-failed.wb",fetch:{xhr:e,status:t,error:a,refId:f}},this)},this)}})}})}(jQuery,wb),function(m,f,v){"use strict";var w="wb-jsonmanager",p="[data-"+w+"]",g=[],y={},x={},j={},e=v.doc,b={ops:[{name:"wb-count",fn:function(e,t,a){var r,n,i=e[t],o=0,s=this.filter||[],l=this.filternot||[];if(m.isArray(s)||(s=[s]),m.isArray(l)||(l=[l]),(s.length||l.length)&&m.isArray(i))for(r=i.length,n=0;n!==r;n+=1)c(i[n],s,l)&&(o+=1);else m.isArray(i)&&(o=i.length);jsonpatch.apply(a,[{op:"add",path:this.set,value:o}])}},{name:"wb-first",fn:function(e,t,a){var r=e[t];m.isArray(r)&&0!==r.length&&jsonpatch.apply(a,[{op:"add",path:this.set,value:r[0]}])}},{name:"wb-last",fn:function(e,t,a){var r=e[t];m.isArray(r)&&0!==r.length&&jsonpatch.apply(a,[{op:"add",path:this.set,value:r[r.length-1]}])}},{name:"wb-nbtolocal",fn:function(e,t,a){var r=e[t],n=this.locale||f.wb.lang,i=this.suffix||"",o=this.prefix||"";"string"==typeof r&&(r=parseFloat(r),isNaN(r))||jsonpatch.apply(a,[{op:"replace",path:this.path,value:o+r.toLocaleString(n)+i}])}},{name:"wb-toDateISO",fn:function(e,t,a){this.set?jsonpatch.apply(a,[{op:"add",path:this.set,value:v.date.toDateISO(e[t])}]):jsonpatch.apply(a,[{op:"replace",path:this.path,value:v.date.toDateISO(e[t])}])}},{name:"wb-toDateTimeISO",fn:function(e,t,a){this.set?jsonpatch.apply(a,[{op:"add",path:this.set,value:v.date.toDateISO(e[t],!0)}]):jsonpatch.apply(a,[{op:"replace",path:this.path,value:v.date.toDateISO(e[t],!0)}])}}],opsArray:[{name:"wb-toDateISO",fn:function(e){var t,a=this.set,r=this.path,n=e.length;for(t=0;t!==n;t+=1)a?jsonpatch.apply(e,[{op:"wb-toDateISO",set:"/"+t+a,path:"/"+t+r}]):jsonpatch.apply(e,[{op:"wb-toDateISO",path:"/"+t+r}])}},{name:"wb-toDateTimeISO",fn:function(e){var t,a=this.set,r=this.path,n=e.length;for(t=0;t!==n;t+=1)a?jsonpatch.apply(e,[{op:"wb-toDateTimeISO",set:"/"+t+a,path:"/"+t+r}]):jsonpatch.apply(e,[{op:"wb-toDateTimeISO",path:"/"+t+r}])}}],opsRoot:[],settings:{}},A=function(e,t,a,r){e.after('<p lang="en"><strong>JSON Manager Debug</strong> ('+t+')</p><ul lang="en"><li>JSON: <pre><code>'+JSON.stringify(a)+"</code></pre></li><li>Patches: <pre><code>"+JSON.stringify(r)+"</code></pre>")},c=function(e,t,a){var r,n,i,o=t.length,s=a.length,l=!1;if(o||s){for(r=0;r<o;r+=1)if(n=t[r],i=d(jsonpointer.get(e,n.path),n.value),n.optional)l=l||i;else{if(!i)return!1;l=!0}if(o&&!l)return!1;for(r=0;r<s;r+=1)if(n=a[r],(i=d(jsonpointer.get(e,n.path),n.value))&&!n.optional||i&&n.optional)return!1}return!0},d=function(e,t){switch(typeof e){case"undefined":return!1;case"boolean":case"string":case"number":return e===t;case"object":if(null===e)return null===t;if(m.isArray(e)){if(m.isArray(t)||e.length!==t.length)return!1;for(var a=0,r=e.length;a<r;a++)if(!d(e[a],t[a]))return!1;return!0}var n=i(t).length;if(i(e).length!==n)return!1;for(a=0;a<n;a++)if(!d(e[a],t[a]))return!1;return!0;default:return!1}},i=function(e){if(m.isArray(e)){for(var t=new Array(e.length),a=0;a<t.length;a++)t[a]=""+a;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t},k=function(e,t,a,r){var n,i;if(m.isArray(a)||(a=[a]),m.isArray(r)||(r=[r]),n=jsonpointer.get(e,t),m.isArray(n))for(i=n.length-1;-1!==i;i-=1)c(n[i],a,r)||jsonpatch.apply(e,[{op:"remove",path:t+"/"+i}]);return e};v.ie&&(Number.prototype.toLocaleString=function(e){var t,a=this.toString().split("."),r=a[0],n=a[1],i=r.length,o=i%3||3,s=r.substr(0,o),l="fr"===e,c=l?" ":",";for(t=o;t<i;t+=3)s=s+c+r.substr(t,3);return n.length&&(s=l?s+","+n:s+"."+n),s}),e.on("json-failed.wb",p,function(e){var t,a=e.target;a===e.currentTarget&&((t=m(a)).addClass("jsonfail"),v.ready(t,w))}),e.on("json-fetched.wb",p,function(e){var t,a,r,n,i,o,s,l,c,d,u,f,p=e.target,g=m(p),b=e.fetch.response,h=m.isArray(b);if(p===e.currentTarget){a="["+(t=v.getData(g,w)).name+"]",c=t.patches||[],f=t.fpath,d=t.filter||[],u=t.filternot||[],m.isArray(c)||(c=[c]),b=h?m.extend([],b):m.extend({},b),f&&(b=k(b,f,d,u)),c.length&&(h&&t.wraproot&&((o={})[t.wraproot]=b,b=o),jsonpatch.apply(b,c)),t.debug&&A(g,"initEvent",b,c);try{y[a]=b}catch(e){return}if(!(x[a]=t).wait&&j[a])for(i=(s=j[a]).length,n=0;n!==i;n+=1){if((l=(o=s[n]).selector).length)try{r=jsonpointer.get(b,l)}catch(e){throw a+" - JSON selector not found: "+l}else r=b;m("#"+o.callerId).trigger({type:"json-fetched.wb",fetch:{response:r,status:"200",refId:o.refId,xhr:null}},this)}v.ready(g,w)}}),e.on("patches.wb-jsonmanager",p,function(e){var t,a,r,n,i,o,s,l,c,d=e.target,u=m(d),f=e.patches,p=e.fpath,g=e.filter||[],b=e.filternot||[],h=!!e.cumulative;if(d===e.currentTarget&&m.isArray(f)){if(!(t=v.getData(u,w)))return!0;if(a="["+t.name+"]",!j[a])throw"Applying patched on undefined dataset name: "+a;for(r=y[a],h||(r=m.extend(!0,m.isArray(r)?[]:{},r)),p&&(r=k(r,p,g,b)),jsonpatch.apply(r,f),t.debug&&A(u,"patchesEvent",r,f),s=(i=j[a]).length,o=0;o!==s;o+=1){if((c=(l=i[o]).selector).length)try{n=jsonpointer.get(r,c)}catch(e){throw a+" - JSON selector not found: "+c}else n=r;m("#"+l.callerId).trigger({type:"json-fetched.wb",fetch:{response:n,status:"200",refId:l.refId,xhr:null}},this)}}}),e.on("postpone.wb-jsonmanager",function(e){var t,a=e.postpone,r=a.dsname,n=a.callerId,i=a.refId,o=a.selector;if(j[r]||(j[r]=[]),j[r].push({callerId:n,refId:i,selector:o}),y[r]&&!x[r].wait){if(t=y[r],o.length)try{t=jsonpointer.get(t,o)}catch(e){throw r+" - JSON selector not found: "+o}m("#"+n).trigger({type:"json-fetched.wb",fetch:{response:t,status:"200",refId:i,xhr:null}},this)}}),e.on("op.action.wb-fieldflow",".wb-fieldflow",function(e,t){var a,r,n,i,o;t.op&&(t.preventSubmit=!0,a=m(t.provEvt),r="wb-fieldflow-submit",n=t,(o=a.data(r))&&!i||(o=[]),o.push(n),a.data(r,o))}),e.on("op.submit.wb-fieldflow",".wb-fieldflow",function(e,t){var a,r=t.op,n=t.source;if(!r)return!0;m.isArray(r)?a=r:(a=[]).push(r),m(n).trigger({type:"patches.wb-jsonmanager",patches:a})}),e.on("timerpoke.wb wb-init.wb-jsonmanager",p,function(e){var t,a,r,n,i,o,s,l,c,d=v.init(e,w,p),u=f[w]||{};d&&(t=m(d),Modernizr.load({load:"site!deps/json-patch"+v.getMode()+".js",testReady:function(){return f.jsonpatch},complete:function(){var e=v.getData(t,w);if(!b.registered){if(a=b.ops.concat(u.ops||[]),r=b.opsArray.concat(u.opsArray||[]),n=b.opsRoot.concat(u.opsRoot||[]),a.length)for(i=0,o=a.length;i!==o;i++)s=a[i],jsonpatch.registerOps(s.name,s.fn);if(r.length)for(i=0,o=r.length;i!==o;i++)s=r[i],jsonpatch.registerOpsArray(s.name,s.fn);if(n.length)for(i=0,o=n.length;i!==o;i++)s=n[i],jsonpatch.registerOpsRoot(s.name,s.fn);b.settings=m.extend({},b.settings,u.settings||{}),b.registered=!0}if(!(c=e.name)||c in g)throw"Dataset name must be unique";g.push(c),(l=e.url)?(t.trigger({type:"json-fetch.wb",fetch:{url:l,nocache:e.nocache,nocachekey:e.nocachekey}}),35===l.charCodeAt(0)&&91===l.charCodeAt(1)&&v.ready(t,w)):v.ready(t,w)}}))}),v.add(p)}(jQuery,window,wb),function(f,p,g){"use strict";var b,h="wb-urlmapping",r="[data-"+h+"]",n="domapping."+h,i=g.doc,m={op:"move",path:"{base}",from:"{base}/{qval}"},v=function(e,t,a){var r,n,i,o,s,l,c;for(n=(a=f.isArray(a)?f.extend([],a):[a]).length,r=0;r!==n;r+=1)if(o=(i=a[r]).action){if(s=i.match,c=i.default,l=!1,s&&!c)throw"'match' and 'default' property need to be set";if(c&&t.length&&"string"==typeof s)try{l=(l=new RegExp(s).exec(t))||c}catch(e){}switch(!i.qval&&l&&(i.qval=l),o){case"patch":var d=i.patches,u=i.base||"/";d||(d=[m],i.cumulative=!0),f.isArray(d)||(d=[d]),d=w(d,i.qval,u),i.patches=d;break;case"ajax":i.trigger&&e[0]!==b&&(i.trigger=!1),i.url=y(i.url,i.qval);break;case"tblfilter":i.value=y(i.value,i.qval)}}e.trigger({type:"do.wb-actionmng",actions:a})},w=function(e,t,a){var r,n,i,o=e.length,s=[];for(a||(a="/"),r=0;r!==o;r+=1)n=e[r],i=f.extend({},n),n.path&&(i.path=y(n.path,t,a)),n.from&&(i.from=y(n.from,t,a)),n.value&&(i.value=y(n.value,t,a)),s.push(i);return s},y=function(e,t,a){return t?a?e.replace(/\{qval\}/,t).replace(/\{base\}/,a):e.replace(/\{qval\}/,t):e};i.on(n,r,function(e){var t,a,r,n,i,o,s=e.target,l=f(s),c=encodeURI(decodeURI(p.location.search.replace(/^\?/,""))).replace(/'/g,"%27").replace(/\+/g,"%20").split("&"),d=c.length,u=f.extend({},p[h]||{},g.getData(l,h));for(t=0;t!==d&&(null===(a=c[t])||(r=a.split("="),n=decodeURI(r[0]),i=decodeURI(r[1]),"object"!=typeof(o=u[a]||u[n])||(v(l,i,o),u.multiplequery)));t+=1);}),i.on("timerpoke.wb wb-init.wb-urlmapping",r,function(e){var t,a=g.init(e,h,r);a&&(t=f(a),b||(b=a),g.ready(t,h),g.isReady?t.trigger(n):i.one("wb-ready.wb",function(){t.trigger(n)}))}),g.add(r)}(jQuery,window,wb),function(a,e,o){"use strict";var t=o.doc,r="#wb-srch-q",s=a(r),l=a("#"+s.attr("list")),n=function(e){0<e.length&&a(this).trigger({type:"ajax-fetch.wb",fetch:{url:o.pageUrlParts.protocol+"//clients1.google.com/complete/search?client=partner&sugexp=gsnos%2Cn%3D13&gs_rn=25&gs_ri=partner&partnerid="+window.encodeURIComponent("008724028898028201144:knjjdikrhq0+lang:"+o.lang)+"&types=t&ds=cse&cp=3&gs_id=b&hl="+o.lang+"&q="+encodeURI(e),dataType:"jsonp",jsonp:"callback"}})};t.on("change keyup",r,function(e){var t=e.target,a=e.target.value,r=e.which;switch(e.type){case"change":n.call(t,a);break;case"keyup":e.ctrlKey||e.altKey||e.metaKey||(32===r||47<r&&r<91||95<r&&r<112||159<r&&r<177||187<r&&r<223)&&n.call(t,a)}}),t.on("ajax-fetched.wb",r,function(e){var t,a,r=e.fetch.response[1],n=r.length,i="";for(l.empty(),t=0;t<n;t+=1)i+='<option label="'+(a=r[t])[0]+'" value="'+a[0]+'"></option>';o.ielt10&&(i="<select>"+i+"</select>"),l.append(i),s.trigger("wb-update.wb-datalist")}),window["wb-data-ajax"]={corsFallback:function(e){return e.url=e.url.replace(".html",".htmlp"),e}},a("[data-reveal]").change(function(){var e=a(this),t=e.attr("data-reveal");return e.is(":checked")?a(t).removeClass("hide"):a(t).addClass("hide")})}(jQuery,document,wb),function(g,u,l){"use strict";function o(e){if("click"===e.type)return!0;if("keypress"!==e.type)return!1;var t=e.charCode||e.keyCode;return 32===t||13===t||void 0}var t,c=(t=new RegExp("{{\\s*([a-z0-9_$][\\.a-z0-9_]*)\\s*}}","gi"),function(e,c,d){return e.replace(t,function(e,t){for(var a,r,n,i=t.split("."),o=i.length,s=c,l=0;l<o;l+=1){if(void 0===(s=s[i[l]]))throw"tim: '"+i[l]+"' not found in "+e;if(l===o-1)return g.isNumeric(s)&&d?(a=s,r=d,n=Math.pow(10,r||0),Math.round(a*n)/n).toLocaleString(u.documentElement.lang):g.isNumeric(s)?s.toLocaleString(u.documentElement.lang):s}})});g.fn.extend({relatives:function(){var a=g();return this.each(function(e,t){t.wb5&&t.wb5.relatives&&t.wb5.relatives.each(function(){a=a.add(this)})}),a},related:function(a,r){return this.each(function(e,t){r&&t.wb5&&t.wb5.relatives&&t.wb5.relatives.each(function(){a=a.add(this)}),g.extend(t,{wb5:{relatives:a}})}),this}}),g.fn.extend({shuffle:function(){var a=this.get(),t=g.map(a,function(){var e=Math.floor(Math.random()*a.length),t=g(a[e]).clone(!0)[0];return a.splice(e,1),t});return this.each(function(e){g(this).replaceWith(g(t[e]))}),g(t)}}),g.fn.extend({rand:function(e){var t=this,a=t.size();if(a<(e=e?parseInt(e):1))return t.pushStack(t);if(1==e)return t.filter(":eq("+Math.floor(Math.random()*a)+")");r=t.get();for(var n=0;n<a-1;n++){var i=Math.floor(Math.random()*(a-n))+n;r[i]=r.splice(n,1,r[i])[0]}return r=r.slice(0,e),t.filter(function(e){return-1<g.inArray(t.get(e),r)})}}),g.fn.extend({notEmpty:function(){return 0!==this.length}}),g.fn.extend({command:function(e){if(e.length){var t=e.split("@");return{command:t[0],selector:t[1],options:t[2]}}return{command:!1,selector:!1}}}),g("[data-wb5-bind]").each(function(e,t){var a,r=g(t);r.parents().is("template")||(a=g(r.attr("data-wb5-bind"))).notEmpty()&&r.related(a)}),g(u).on("keypress click","[data-wb5-debug]",function(e){if(!o(e))return!0;for(var t=g(this),a=t.attr("data-wb5-debug").split(","),r=a.length-1;0<=r;r--)console.log(t[a[r]]())}),g(u).on("draw.dt",".wb-tables",function(e){var t=g(this),a=t.DataTable();t.relatives().trigger({type:e.type,table:a,displayed:a.page.info().recordsDisplay,total:a.page.info().recordsTotal})}),Modernizr.details||g(u).one("draw.dt",".wb-tables",function(e){g(this).find("summary").removeClass("wb-init").removeClass("wb-details-inited").trigger("wb-init.wb-details")}),g(u).on("draw.dt","[data-wbtbl-draw]",function(e){var t,a,r=g(this),n=r.command(r.attr("data-wbtbl-draw")),i=e.table,o=g(i.table().node()),s=e.displayed!==e.total,l=0,c=e.total;e.displayed;switch(n.command){case"display":return t=r,a=i.page.info()[n.options],t.is(":input")?t.val(a):t.text(a),!0;case"count":if((s?i.rows({search:"applied"}):i.rows({page:"all"})).iterator("row",function(e,t){-1<g(this.row(t).node()).text().indexOf(n.options)&&l++}),r.is("progress")){if(r.attr({max:c,value:l}),o.hasClass("wbtbl-silent"))return!0;r.trigger("updated.wb5")}return r.text(l)}}),g("[data-wbtbl-reset]").on("click",function(e){var t=this.getAttribute("data-wbtbl-reset").split("@"),a=g(t[0]).DataTable();return a.search("").columns().search(""),"all"===t[1]?a.search("").columns().search("").draw():a.column(t[1]).search("").draw()}),g(u).on("wb-ready.wb-tables","[data-wbtbl-tag=enable]",function(){var e=g(this),t=e.closest(".dataTables_wrapper");t.addClass("tagcloud").find(".top").append('<div data-wbtbl-tagcloud="active" aria-live="polite"></div>'),e.related(t.find("[data-wbtbl-tagcloud]").eq(0),!0)}),g(u).on("draw.dt","[data-wbtbl-tagcloud]",function(e){var t=e.table,r=-1,n=g(this),a=function(){var e=this.search();if(e){var t=e.split("|"),a='<li><span class="tagitem" data-wbtbl-col-idx="'+r+'"><span class="content">'+t.map(function(e){return e.replace(/[{()}]/g,"")}).join(" &amp; ")+'</span> <button type="button" class="close" tabindex="0" aria-label="'+l.i18n("geo-aoi-btnclear")+'"><span aria-hidden="true">&times;</span></button></span></li>';n.find("ul").append(a)}r++};n.html('<ul class="list-inline tags" aria-live="polite"></ul><div class="clearfix"></div>'),a.call(t),t.columns().every(a)}),g(u).on("updated.wb5","[data-wb5-update]",function(e){var t=g(this).relatives(),a=this.getAttribute("max"),r=this.getAttribute("value"),n=(this.getAttribute("data-percentage"),Math.ceil(r/a*100)||0);t.find(".meter").text(r),t.removeClass(function(e,t){return(t.match(/(^|\s)p\d+/g)||[]).join(" ")}).attr("data-percentage","p"+n),t.addClass("p"+n)}),g(u).on("keypress click","[data-wbtbl-highlight]",function(e){if(!o(e))return!0;var t=g(this),a=t.command(this.getAttribute("data-wbtbl-highlight")),r=t.relatives().DataTable();t.relatives().removeClass("wbtbl-silent").addClass("wbtbl-silent"),r.column(a.selector).search(a.options,!1,!1,!0).draw()}),g(u).on("keypress click","[data-wbtbl-search]",function(e){if(!o(e))return!0;var t=g(this),a=t.command(this.getAttribute("data-wbtbl-search")),r=t.relatives().DataTable();t.relatives().removeClass("wbtbl-silent"),r.search("").columns().search(""),r.column(a.selector).search(a.options,!1,!1,!0).draw()}),g(u).on("submit","[data-wbtbl-submit]",function(e){var t=g(this),a=t.command(this.getAttribute("data-wbtbl-submit")),r=t.relatives().DataTable(),n=a.selector;return t.relatives(),r.search("").columns().search(""),n&&(r=r.column(n)),r.search(t.find("input").val(),!1,!1,!0).draw(),!1}),g(u).on("keypress click","[data-wb5-ajax]",function(e){if(!o(e))return!0;var t=g(this),a=t.command(this.getAttribute("data-wb5-ajax")),r=t.relatives();switch(r.attr("aria-live","polite"),a.command){case"replace":g.get(a.options,function(e){r.html(e)})}}),g(u).on("keypress click","[data-wb5-load]",function(e){if(!o(e))return!0;var t=g(this),a=t.command(this.getAttribute("data-wb5-load")),r=t.relatives();switch(r.attr({"aria-relevant":"all","aria-live":"polite","aria-atomic":"true"}),a.command){case"replace":r.load(a.options)}}),g(u).on("keypress click","[data-wb5-trigger]",function(e){if(!o(e))return!0;var t=g(this),a=t.command(this.getAttribute("data-wb5-trigger"));t.relatives().trigger(a.command)}),g(u).on("keypress click","[data-wb5-profile]",function(e){if(!o(e))return!0;var t=g(this),a=t.command(this.getAttribute("data-wb5-profile"));"single"===a.command&&(t.relatives().removeClass(a.options).filter("[role=button]").attr("aria-pressed","false"),g(e.target).closest(t.relatives()).addClass(a.options).filter("[role=button]").attr("aria-pressed","true"))}),g(u).on("keypress click","[data-wbtbl-tagcloud] li button",function(e){if(!o(e))return!0;var t=g(this),a=t.closest("li"),r=a.find(".content").text(),n=parseInt(t.closest("[data-wbtbl-col-idx]").attr("data-wbtbl-col-idx")),i=t.closest(".dataTables_wrapper").find(".wb-tables").removeClass("wbtbl-silent").DataTable();-1!==n&&(i=i.column(n)),i.search("",!1,!1,!0).draw(),a.remove(),g('[data-wbtbl-search$="@'+n+"@"+r+'"],[data-wbtbl-highlight$="@'+n+"@"+r+'"]').removeClass("pick"),g('form[data-wb5-bind="#'+i.table().node().id+'"]').find('[value^="'+n+'@"],[data-wbtbl-bind^="'+n+'@"]').each(function(e,t){var a=g(t);return a.is("[type=checkbox],[type=radio]")?(a.prop("checked",!1),!0):a.is("[type=text],[type=textarea]")?(a.val(""),!0):!(a.closest("select").get(0).selectedIndex=0)})}),g(u).on("submit","[data-wbtbl-post]",function(e){var t=g(this),a=!!t.is("[action]"),r=[],n=t.relatives().DataTable(),i=t.command(this.getAttribute("data-wbtbl-post")),o=[];if(t.find(i.selector).each(function(e,t){var a=g(t);if(a.is("[type=checkbox]")){if(a.is(":checked")){if(a.is("[data-xor]"))return o.push(a.val()),!0;r.push(a.val())}return!0}r.push(a.val())}),1<o.length){for(var s=[],l=!1,c=o.length-1;0<=c;c--){var d=o[c].split("@");l=!1===l?d[0]:l,s.push("("+d[1]+")")}r.push(l+"@"+s.join("|"))}else 1===o.length&&r.push(o[0]);for(var u=r.length-1;0<=u;u--){var f=(d=r[u].split("@"))[0],p=d[1];-1===p.indexOf("|")?n.column(f).search(p):n.column(f).search(p,!0)}return n.draw(),a}),g(u).on("reset","[data-wbtbl-post]",function(e){var t=g(this).relatives().DataTable();t.search(""),t.columns().every(function(){this.search("")}),t.draw()}),g("[data-wb5-click]").on("click",function(){var e=g(this).data("wb5-click").split("@"),t=e[0],a=(e[1],e[2]);if("postback"===t){var r=g(e[1]);return g.ajax({type:r.attr("method"),url:r.attr("action"),data:r.serialize()}),!a.block}}),g("[data-wb5-randomize]").each(function(){var e,t=g(this),a=t.data("wb5-randomize").split("@"),r=a[0],n=a[1],i=2<a.length?JSON.parse(a[2]):{};return"self!"===n.substring(0,5)&&(n=n.substr(5),e=t),"shuffle"===r&&g(n,e).shuffle(),"toggle"===r&&g(n,e).rand(i.number).toggleClass(i.classes),!0}),g(u).on("wb-ready.wb-charts","[data-wb-charts-interactive]",function(){var e=g(this),t=e.command(this.getAttribute("data-wb-charts-interactive")),i=l.getId().replace(/-/g,""),o=g(t.selector).html(),s=t.options?t.options:1,a=e.prev();g("<div id='"+i+"' class='wbchrt-tpl'></div>").css({position:"absolute",display:"none"}).appendTo("body"),g("canvas:eq(1)",a).css("position","relative"),a.on("plothover",function(e,t,a){if(a){var r=g("#"+i),n={x:a.datapoint[0],y:a.datapoint[1],label:a.series.label,formatted:{}};r.html(c(o,n,s)),r.css({top:a.pageY+7,left:a.pageX+7}).show()}else g("#"+i).hide()})})}(jQuery,document,wb),function(x,j,A){"use strict";var k,o=A.doc,s="wb-suggest",l="[data-"+s+"]",C=5,I=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},T=function(e,t,a){var r,n,i,o,s,l,c,d,u,f=a||JSON.parse(this.dataset.wbSuggestions||[]),p=this.dataset.wbFilterType||"any",g=f.length,b=[],h=this.childNodes,m=h.length-1,v=x("[list="+this.id+"]"),w=v.get(0);if(!f.length&&C&&(C-=1,k&&clearTimeout(k),k=setTimeout(T(e,t,a),250)),t||(t=parseInt(this.dataset.wbLimit||g)),e){switch(p){case"startWith":e="^"+e;break;case"word":e="^"+e+"|\\s"+e}r=new RegExp(e,"i")}if(!e||e.length<2)(function(){var e,t,a=this.children;for(t=a.length-1;0<t;t-=1)1===(e=a[t]).nodeType&&"TEMPLATE"!==e.nodeName&&this.removeChild(e)}).call(this),h=[];else for(c=m;0!==c;c-=1)1===(d=h[c]).nodeType&&"OPTION"===d.nodeName&&((u=d.getAttribute("value"))&&u.match(r)?b.push(I(u)):this.removeChild(d));var y=this.querySelector("template");for(y&&!y.content&&A.tmplPolyfill(y),n=0;n<g&&b.length<t;n+=1)i=f[n],o=I(i),-1!==b.indexOf(o)||e&&!i.match(r)||(b.push(o),y?l=(s=y.content.cloneNode(!0)).querySelector("option"):(s=j.createDocumentFragment(),l=j.createElement("OPTION"),s.appendChild(l)),l.setAttribute("label",i),l.setAttribute("value",i),this.appendChild(s));v.trigger("wb-update.wb-datalist"),w.value=w.value},c=function(e){var t=e.target,a=j.getElementById(t.getAttribute("list"));Modernizr.load({test:Modernizr.stringnormalize,nope:["site!deps/unorm"+A.getMode()+".js"]}),x(a).trigger({type:"json-fetch.wb",fetch:{url:a.dataset.wbSuggest}})},d=function(e){var t=e.target,a=j.getElementById(t.getAttribute("list")),r=e.target.value,n=e.which;switch(k&&clearTimeout(k),e.type){case"change":k=setTimeout(T.bind(a,r),250);break;case"keyup":e.ctrlKey||e.altKey||e.metaKey||(8===n||32===n||47<n&&n<91||95<n&&n<112||159<n&&n<177||187<n&&n<223)&&(k=setTimeout(T.bind(a,r),250))}};o.on("timerpoke.wb wb-init.wb-suggest json-fetched.wb",l,function(e){var t,a,r,n=e.type,i=e.target;if(e.currentTarget===i)switch(n){case"timerpoke":case"wb-init":t=e,a=A.init(t,s,l),r="[list="+t.target.id+"]",a&&(Modernizr.addTest("stringnormalize","normalize"in String),o.one("focus",r,c),(a.dataset.wbLimit||a.dataset.wbFilterType)&&o.on("change keyup",r,d),A.ready(x(a),s));break;case"json-fetched":(function(e){this.dataset.wbSuggestions=JSON.stringify(e),delete this.dataset.wbSuggest,T.call(this,j.querySelector("[list="+this.id+"]").value)}).call(i,e.fetch.response)}return!0}),A.add(l)}(jQuery,document,wb),function(N,h,m,S){"use strict";var v,c,d,w="wb-combobox",y="."+w,e=S.doc,x={template:'<div class="combobox-wrapper"><div role="combobox" aria-expanded="false" aria-haspopup="listbox" data-wb5-bind="aria-owns@popupId"><input autocomplete="off" data-rule-fromListbox="true" data-wb5-bind="id@fieldId, aria-controls@popupId, value@filter" aria-autocomplete="list" aria-activedescendant="" /></div><div data-wb5-bind="id@popupId" role="listbox" class="hidden"><template data-slot-elm="" data-wb5-template="sub-template-listbox"><ul class="list-unstyled mrgn-bttm-0">\x3c!-- <li class="brdr-bttm" role="option" data-wb5-for="option in wbLoad" data-wb5-if="!parent.filter.length || parent.config.compareLowerCase(option,parent.filter)" data-wb5-on="select@select(option); live@parent.nbdispItem(wb-nbNode)" >{{ option }}</li> --\x3e<li class="" role="option" data-wb5-for="option in options" data-wb5-if="!parent.filter.length || parent.config.compareLowerCase(option.value,parent.filter)" data-wb5-on="select@select(option.value); live@parent.nbdispItem(wb-nbNode)" >{{ option.textContent }}</li></ul></template></div></div>',i18n:{en:{errValid:"You need to choose a valid options."},fr:{errValid:"Veuillez choisir une option valide."}},compareLowerCase:function(e,t){return-1!==e.toLowerCase().indexOf(t.toLowerCase())},similarText:function(e,t,a){function g(e,t){for(var a=[],r=0;r<=e.length;r++){for(var n=r,i=0;i<=t.length;i++)if(0===r)a[i]=i;else if(0<i){var o=a[i-1];e.charAt(r-1)!==t.charAt(i-1)&&(o=Math.min(Math.min(o,n),a[i])+1),a[i-1]=n,n=o}0<r&&(a[t.length]=n)}return a[t.length]}var r=function(e,t){e=e.replace(/[\-\/]|_/g," ").replace(/[^\w\s]|_/g,"").trim().toLowerCase(),t=t.replace(/[\-\/]|_/g," ").replace(/[^\w\s]|_/g,"").trim().toLowerCase();var a=e.split(" "),r=t.split(" ");if(e.length>t.length&&(a=t.split(" "),r=e.split(" ")),!r.length||!a.length)return 100;for(var n=0,i=0,o="",s="",l=0;l<a.length;l++){for(var c=0,d=0,u=!1,f=0;f<r.length;f++)if(s=a[l],0<=(o=r[f]).indexOf(s)){var p=o.length;(!u||p<c)&&(c=o.length,d=o.length),u=!0}else u||c<(p=o.length-g(s,o))&&(c=p,d=o.length);n+=c,i+=d}return 0===n?0:n/i*100}(e,t);return(a=parseInt(a))<=r}},u=9,f=13,p=27,g=35,b=36,j=38,A=40,k={},C=m.createDocumentFragment(),O=[],E=function(t,a,e){var r,n=t.childNodes,i=n.length,o=[];for(m=0;m<i;m++){if(3===(r=n[m]).nodeType&&-1!=r.textContent.indexOf("{{")){r.textContent=r.textContent.replace(/{{\s?([^}]*)\s?}}/g,function(e,t){return z(a.data,t.trim())})}if("TEMPLATE"!==r.nodeName){if(1===r.nodeType)if(r.hasAttribute("data-wb5-for")){var s=q(r,"data-wb5-for"),l=R(s),c=z(a.data,l.for);if(!c)throw"Iterator not found";var d=c.length,u=0;for(c.wbLen=parseInt(d),N.isArray(c)&&(c.active=u),m=0;m<d;m++){var f=r.cloneNode(!0),p=L(f),g={"wb-idx":m,"wb-nbNode":u,parent:a.data};g[l.alias]=c[m],g=F(g),e&&(a.data[e]=g),p.if&&!D(p.if,g.data,a.data)||(u+=1,E(f,g,e),t.appendChild(f))}c.wbActive=u,o.push(r)}else r.hasAttribute("data-wb5-if")||r.hasAttribute("data-wb5-else")||r.hasAttribute("data-wb5-ifelse"),E(r,a,e)}else{U(r);var b=q(r,"data-wb5-template");b||(b=S.getId()),r.parentNode.hasAttribute("data-wb5-template")||r.parentNode.setAttribute("data-wb5-template",b),a.tmplDefault(b,r)}}for(i=o.length,m=0;m!==i;m+=1)t.removeChild(o[m]);if(1===t.nodeType&&t.hasAttribute("data-wb5-bind"))for(var h=q(t,"data-wb5-bind").split(", "),m=0;m<h.length;m++){var v=h[m].split("@");t[v[0]]?(t[v[0]]=z(a.data,v[1]),a.observe(v[1],function(e){return t[v[0]]=z(a.data,v[1])||""})):(t.setAttribute(v[0],z(a.data,v[1])),a.observe(v[1],function(e){return void 0!==t[v[0]]?t[v[0]]=z(a.data,v[1])||"":t.setAttribute(v[0],z(a.data,v[1]))||""}))}if(1===t.nodeType&&t.hasAttribute("data-wb5-text")){var w=q(t,"data-wb5-text");t.textContent=z(a.data,w),a.observe(w,function(e){return t.textContent=z(a.data,w)||""})}if(1===t.nodeType&&t.hasAttribute("data-wb5-on")){var y=q(t,"data-wb5-on").split("; ");i=y.length;for(m=0;m<i;m++){var x,j,A=y[m].split("@"),k=A[0],C=A[1],I=C.indexOf("("),T=C.lastIndexOf(")");if(I&&T&&(x=C.substring(0,I).trim(),j=C.substring(I+1,T).trim()),!x)throw"Error, an event handler need to call a function";j&&(j=M(j,a.data)),"live"===k?z(a.data,x).call(a.data,j):O.push({nd:t,evt:k,trigger:x,attr:j})}}},q=function(e,t){var a=e.getAttribute(t);return e.removeAttribute(t),a},D=function(e,t,a){return!!M(e,t,a)},M=function(e,n,i){var o=/{{-\s?([^}]*)\s?-}}/g,s=[];return e=(e=(e=e.replace(/"([^"\\]*(\\.[^"\\]*)*)"|\'([^\'\\]*(\\.[^\'\\]*)*)\'/g,function(e,t){var a="{{-"+s.length+"-}}";return s.push(e),a})).replace(/[a-zA-Z]([^\s]+)/g,function(e,t){var a,r=e.trim();r=r.replace(o,function(e,t){return s[t]});try{a=z(n,r)}catch(e){try{a=z(i,r)}catch(e){throw"Information in the DATA obj not found"}}return"object"==typeof a&&(a=JSON.stringify(a)),"string"==typeof a?'"'+a+'"':a})).replace(o,function(e,t){return s[t]}),new Function("return "+e)()},L=function(e){var t={},a=q(e,"data-wb5-if");if(a)t.if=a,n(t,{exp:a,block:e});else{null!=q(e,"data-wb5-else")&&(t.else=!0);var r=q(e,"data-wb5-elseif");r&&(t.elseif=r)}return t},n=function(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)},I=function(e,t){var a,r,n=e.options,i=n.length;for(a=0;a<i;a++)r=n[a],t.data.options.push({value:r.value,textContent:r.textContent});t.data.fieldId=e.id||S.getId(),t.data.fieldName=e.name,t.data.mustExist=!0},T=function(e,t){var a,r=node.childNodes,n=r.length;for(a=0;a<n;a++)r[a]},R=function(e){var t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,a=e.match(/([^]*?)\s+(?:in|of)\s+([^]*)/);if(a){var r={};r.for=a[2].trim();var n=a[1].trim().replace(/^\(|\)$/g,""),i=n.match(t);return i?(r.alias=n.replace(t,""),r.iterator1=i[1].trim(),i[2]&&(r.iterator2=i[2].trim())):r.alias=n,r}},z=function(e,t){var a=(t=t.trim()).substring(0,1),r=t.substring(-1);if("'"===a||'"'===a||"'"===r||'"'===r)return t.substring(1,t.length-1);var n=t.indexOf("("),i=t.lastIndexOf(")"),o=[];if(-1!==n&&-1!==i&&n+1!==i){var s,l,c,d=t.substring(0,n);for(c=(o=t.substring(n+1,i).split(",")).length,s=0;s<c;s+=1){l=o[s];var u=z(e,l);o[s]=u}t=d+"()"}var f,p,g,b=t.split("."),h=b.length;for(f=0;f<h;f+=1){if(p=b[f],!e)return;-1!==p.lastIndexOf("()")?(g=p.substring(0,p.length-2),e="string"==typeof e?String.prototype[g].apply(e,o):e[g].apply(e,o)):e=e[p]}return e},U=function(e){if(!e.content){var t,a,r=e;for(t=r.childNodes,a=m.createDocumentFragment();t[0];)a.appendChild(t[0]);r.content=a}},P=function(e,t){for(var a=m.getElementById(e.getAttribute("aria-controls")),r=N(e).parent(),n=N(e);!n.hasClass("wb5React");)n=n.parent();var i,o,s=k[n.get(0).id],l=a.getAttribute("data-wb5-template");if(l&&(i=s.template(l)||m.getElementById(l)||s.tmplDefault(l)),!i||!l)throw"No template defined to show listbox options";s.template(l,i),U(i),o=i.content.cloneNode(!0),s.data.filter=e.value,O=[],E(o,s,l),o.querySelectorAll("[role=option]").length?(a.innerHTML="",a.appendChild(o),N(a).removeClass("hidden"),c=r.get(0)):c&&B()},B=function(){if(c){var e=c.getAttribute("aria-owns");N("#"+e).addClass("hidden"),c=null}},r=function(e){if(l(e),document.activeElement!==e){for(var t=N(e).parent(),a=N(e);!a.hasClass("wb5React");)a=a.parent();for(var r=k[a.get(0).id],n=e.value,i={},o=r.data.options,s=0;s<o.length;s++)if(n===o[s].value){i=o[s];break}t.trigger("wb.change",{value:e.value,item:i})}},l=function(e){var t=e.form&&e.form.parentNode.classList.contains("wb-frmvld");if(null===e.getAttribute("required")&&""===e.value||null===e.getAttribute("data-rule-mustExist"))return e.setCustomValidity(""),t&&N(e).valid(),!0;for(var a=N(e);!a.hasClass("wb5React");)a=a.parent();var r,n,i=k[a.get(0).id],o=e.getAttribute("aria-controls"),s=(m.getElementById(o),i.data.options),l=e.value,c=s.length;for(r=0;r<c;r+=1)if(l===s[r].value){n=!0;break}return n?(e.setCustomValidity(""),t&&N(e).valid(),!0):(e.setCustomValidity(v.errValid),t&&N(e).valid(),!1)};function F(e){var a={},r={},n={};return function(e){for(var t in e)e.hasOwnProperty(t)&&o(e,t)}(e),{data:e,observe:t,notify:i,template:function(e,t){{if(!t)return r[e]||!1;r[e]=t}},tmplDefault:function(e,t){{if(!t)return n[e]||!1;n[e]=t}},debug_signals:a};function t(e,t){a[e]||(a[e]=[]),a[e].push(t)}function i(e){!a[e]||a[e].length<1||a[e].forEach(function(e){return e()})}function o(e,t,a){var r=e[t];if(Array.isArray(r))return r.wbLen=parseInt(r.length),r.wbActive=0,o(r,"wbLen",t),void o(r,"wbActive",t);Object.defineProperty(e,t,{get:function(){return r},set:function(e){r=e,i(a?a+"."+t:t)}})}}e.on("wb-ready.wb",function(e){N.validator&&N.validator.addMethod("fromListbox",function(e,t){return t.checkValidity()},"You need to choose a valid options")}),e.on("json-fetched.wb","[role=combobox]",function(e){for(var t=e.target,a=e.fetch.response,r=N(t);!r.hasClass("wb5React");)r=r.parent();k[r.get(0).id].data.wbLoad=a}),e.on("click vclick touchstart focusin","body",function(e){c&&!c.parentElement.contains(e.target)&&setTimeout(function(){B()},1)}),e.on("focus","[role=combobox] input",function(e,t){c||setTimeout(function(){P(e.target)},1)}),e.on("blur","[role=combobox] input",function(e,t){r(e.target)}),e.on("keyup","[role=combobox] input",function(e){var t=e.which||e.keyCode,a=e.target.classList.contains("error");switch(t){case j:case A:case p:case f:case b:case g:e.preventDefault();case u:return void(a&&setTimeout(function(){r(e.target)},100));default:setTimeout(function(){P(e.target),a&&r(e.target)},100)}}),e.on("keydown","[role=combobox] input",function(e){var t=e.which||e.keyCode,a=e.target;if(t!==p){var r;c||P(a);var n=a.getAttribute("aria-activedescendant"),i=n?m.getElementById(n):null,o=m.getElementById(a.getAttribute("aria-controls")).querySelectorAll("[role=option]"),s=o.length,l=-1;if(i){for(l=0;l<s&&o[l].id!==i.id;l++);s<=l&&(l=-1)}switch(t){case j:-1===l?l=s-1:0!==l?l--:l=s-1;break;case A:-1===l?l=0:l<s&&l++;break;case b:l=0;break;case g:l=s-1;break;case f:return N(o[l]).trigger("wb.select"),B(),void e.preventDefault();case u:return d&&N(o[l]).trigger("wb.select"),void B();default:return}e.preventDefault(),r=o[l],i&&i.setAttribute("aria-selected","false"),r?(r.id||(r.id=S.getId()),a.setAttribute("aria-activedescendant",r.id),r.setAttribute("aria-selected","true"),d=!0):a.setAttribute("aria-activedescendant","")}else B()}),e.on("mouseover","[role=listbox] [role=option]",function(e,t){var a=c.querySelector("input"),r=e.target,n=a.getAttribute("aria-activedescendant"),i=n?m.getElementById(n):null;i&&i.setAttribute("aria-selected","false"),r.id||(r.id=S.getId()),i&&i.id!==r.id&&(d=!1),r.setAttribute("aria-selected","true"),a.setAttribute("aria-activedescendant",r.id)}),e.on("click","[role=listbox] [role=option]",function(e,t){var a=N(c.querySelector("input"));N(e.target).trigger("mouseover").trigger("wb.select"),a.trigger("focus"),B()}),e.on("wb.select","[role=listbox] [role=option]",function(e,t){for(var a=e.target,r=m.querySelector("[aria-activedescendant="+a.id+"]"),n=N(r);!n.hasClass("wb5React");)n=n.parent();var i,o,s=k[n.get(0).id];for(i=0;i<O.length;i++)if((o=O[i]).nd.isEqualNode(a)){s.data[o.trigger].call(s.data,o.attr);break}}),e.on("timerpoke.wb wb-init.wb-combobox",y,function(e,t){var a,r,n,i,o,s=S.init(e,w,y);if(s){a=N(s),r=N.extend(!0,{},x,h[w],S.getData(a,w)),v||(v=r.i18n[S.lang]);var l=F(t||(o=r,{popupId:S.getId(),fieldId:!1,fieldName:"",mustExist:!1,filter:"",cntdisplayeditem:0,options:[],config:o,i18n:{},horay:"testMe",select:function(e){this.filter=e},nbdispItem:function(e){this.cntdisplayeditem=e}}));s.id||(s.id=S.getId()),r.parserUI&&"function"==typeof r.parserUI?r.parserUI(s,l):r.parserUI&&N.isArray(r.parserUI)&&r.parserUI[s.id]?r.parserUI[s.id].call(this,s,l):(i=l,"SELECT"===(n=s).nodeName?I(n,i):"INPUT"===n.nodeName&&T(n,i)),l.data.fieldId||(l.data.fieldId=S.getId());var c,d=function(e,t){var a,r,n=t.templateID;if(n&&(a=m.getElementById(n)),a)U(a),r=a.content.cloneNode(!0);else{var i=m.createElement("div");i.innerHTML=t.template,(r=m.createDocumentFragment()).appendChild(i)}return O=[],E(r,e),r}(l,r),u=d.childNodes,f=u.length;for(b=0;b<f;b++)if(1===(c=u[b]).nodeType){var p=c.id;p||(p=S.getId(),c.id=p),k[p]=l,c.classList.add("wb5React")}var g=d.querySelector("[role=combobox]");l.data.mustExist&&d.querySelector("[role=combobox] input").setAttribute("data-rule-mustExist","true"),s.parentNode.insertBefore(d,s),r.hideSourceUI?a.addClass("hidden"):(s.id=S.getId(),C.appendChild(s));for(var b=0;b<O.length;b++)O[b];a=N(d),s.dataset.wbLoad&&N(g).trigger({type:"json-fetch.wb",fetch:{url:s.dataset.wbLoad}}),"function"!=typeof C.getElementById&&(C.getElementById=function(e){var t,a,r=this.childNodes,n=r.length;for(t=0;t<n;t+=1)if((a=r[t]).id===e)return a;return!1}),Modernizr.addTest("stringnormalize","normalize"in String),Modernizr.load({test:Modernizr.stringnormalize,nope:["site!deps/unorm"+S.getMode()+".js"]}),S.ready(a,w)}}),S.add(y)}(jQuery,window,document,wb),function(d,a,e,u){"use strict";var t=u.doc,i={},r=(d.expr[":"].checked,function(e,t){e.id||(e.id=u.getId());for(var a=0;a<i.items.length;a++){var r=i.items[a],n=d.extend({},r,{value:r.label,textContent:r.label});n.source||(n.source=e.id),t.data.options.push(n)}});t.on("combobox.createctrl.wb-fieldflow",".wb-fieldflow",function(e,t){i=t,a["wb-combobox"]||(a["wb-combobox"]={}),a["wb-combobox"].parserUI=[],a["wb-combobox"].parserUI[e.target.id]=r,a["wb-combobox"].hideSourceUI=!0,e.target.classList.add("wb-combobox"),d(e.target).trigger("wb-init.wb-combobox"),d(e.target).data().wbFieldflowRegister=[d(e.target).before().get(0).id],d(e.target).attr("data-wb-fieldflow-origin",d(e.target).before().get(0).id)}),t.on("wb.change","[role=combobox]:not(.wb-fieldflow-init)",function(e,t){var a=e.currentTarget,r=(d(a),t.item);a.id||(a.id=u.getId());var n,i=d("#"+r.bind).parentsUntil(".wb-fieldflow").parent();if(i.length){n=i.get(0).id,r.source||n;var o=d("#"+r.bind).data().wbFieldflow;d.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s],c=l.action+".action.wb-fieldflow";l.provEvt="#"+n,d("#"+n).trigger(c,l)}}})}(jQuery,window,document,wb);